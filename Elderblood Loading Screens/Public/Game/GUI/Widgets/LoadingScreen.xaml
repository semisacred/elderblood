<ls:UIWidget
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:ls="clr-namespace:ls;assembly=SharedGUI"
             xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             x:Name="root"
             ls:UIWidget.ContextName="LoadingScreen"
             d:DesignWidth="3840" d:DesignHeight="2160" d:DataContext="{d:DesignInstance {x:Type ls:DCLoadingScreen}, IsDesignTimeCreatable=True}">
    <ls:UIWidget.Template>
        <ControlTemplate TargetType="ls:UIWidget">
            <ControlTemplate.Resources>

                <BitmapImage x:Key="InitialScreen"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_A.png"/>
                <BitmapImage x:Key="KeyArtScreen"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_B.png"/>
                <BitmapImage x:Key="TutorialScreen"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_C.png"/>
                <BitmapImage x:Key="CrecheScreen"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_D.png"/>

                <Storyboard x:Key="LoadingScreen.HintFadeIn" FillBehavior="HoldEnd">
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
                        <LinearDoubleKeyFrame Value="0" KeyTime="0:0:0" />
                        <LinearDoubleKeyFrame Value="1" KeyTime="0:0:0.5" />
                    </DoubleAnimationUsingKeyFrames>
                </Storyboard>

                <Storyboard x:Key="LoadingScreen.HintFadeOut" FillBehavior="Stop">
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
                        <LinearDoubleKeyFrame Value="1" KeyTime="0:0:0" />
                        <LinearDoubleKeyFrame Value="0" KeyTime="0:0:0.5" />
                    </DoubleAnimationUsingKeyFrames>
                </Storyboard>

                <DropShadowEffect x:Key="dropShadow" BlurRadius="25" ShadowDepth="1" />
                <Storyboard x:Key="LoadingScreen.ScreenFadeIn" TargetName="SingleImageSource" FillBehavior="HoldEnd">
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
                        <LinearDoubleKeyFrame Value="0" KeyTime="0:0:0" />
                        <LinearDoubleKeyFrame Value="1" KeyTime="0:0:0.8" />
                    </DoubleAnimationUsingKeyFrames>
                </Storyboard>

                <Style x:Key="Loading.HintText" TargetType="TextBlock">
                    <Setter Property="TextAlignment" Value="Center" />
                    <Setter Property="FontSize" Value="{StaticResource BigFontSize}" />
                    <Setter Property="Foreground" Value="{StaticResource LS_accent100TxtColor}" />
                    <Setter Property="LineHeight" Value="60" />
                    <Setter Property="LineStackingStrategy" Value="BlockLineHeight" />
                    <Setter Property="TextWrapping" Value="Wrap" />
                    <Setter Property="Effect" Value="{StaticResource dropShadow}" />
                    <Setter Property="Stroke" Value="Black" />
                    <Setter Property="StrokeThickness" Value="7" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding DataContext.Data.UIInputMethod, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" Value="Controller">
                            <Setter Property="LineHeight" Value="80"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>

                <Style x:Key="Loading.HintText.Binding" BasedOn="{StaticResource Loading.HintText}" TargetType="TextBlock">
                    <Setter Property="Foreground" Value="{StaticResource LS_tint100}"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                </Style>

                <ControlTemplate x:Key="Loading.Hint.KeyboardBinding" TargetType="ContentControl">
                    <TextBlock Style="{StaticResource Loading.HintText.Binding}" Text="{Binding Shortcut}" VerticalAlignment="Bottom"/>
                </ControlTemplate>

                <ControlTemplate x:Key="Loading.Hint.ControllerBinding" TargetType="ContentControl">
                    <Viewbox StretchDirection="DownOnly" Width="{StaticResource ScaledControllerHintSize}" Height="{StaticResource ScaledControllerHintSize}">
                        <ContentControl Template="{StaticResource ControllerButton.ImageSwitcher}" />
                    </Viewbox>
                </ControlTemplate>

                <Style x:Key="Loading.Hint.NamedParams" TargetType="ContentControl">
                    <Setter Property="Margin" Value="0 0 0 -18" />
                    <Setter Property="Template" Value="{StaticResource Loading.Hint.KeyboardBinding}" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding DataContext.Data.UIInputMethod, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" Value="Controller">
                            <Setter Property="Template" Value="{StaticResource Loading.Hint.ControllerBinding}" />
                            <Setter Property="Margin" Value="{StaticResource ScaledInlineControllerHintMargin}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>

                <Style x:Key="Loading.Hint.InlineUIContainerStyle" TargetType="InlineUIContainer">
                </Style>

                <Style x:Key="SequenceStyle" TargetType="ls:LSImageSequence">
                    <Setter Property="Opacity" Value="0"/>
                    <Setter Property="ImageFadeInDuration" Value="0:0:1"/>
                    <Setter Property="ImageHoldDuration" Value="0:1:0"/>
                    <Setter Property="ImageFadeOutDuration" Value="0:0:1"/>
                    <Setter Property="Shuffle" Value="True"/>
                    <Setter Property="Width" Value="3840"/>
                    <Setter Property="Height" Value="2160"/>
                </Style>

                <ControlTemplate x:Key="LoadingImagesAct1">
                    <ls:LSImageSequence Style="{StaticResource SequenceStyle}">
                        <ls:LSImageSequence.Resources>
                            <BitmapImage x:Key="bg1" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_01.png"/>
                            <BitmapImage x:Key="bg2" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_02.png"/>
                            <BitmapImage x:Key="bg3" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_03.png"/>
                            <BitmapImage x:Key="bg4" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_04.png"/>
                            <BitmapImage x:Key="bg5" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_05.png"/>
                            <BitmapImage x:Key="bg6" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_06.png"/>
                            <BitmapImage x:Key="bg7" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_07.png"/>
                            <BitmapImage x:Key="bg8" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_08.png"/>
                            <BitmapImage x:Key="bg9" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_09.png"/>
                            <BitmapImage x:Key="bg10" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_10.png"/>
                            <BitmapImage x:Key="bg11" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_11.png"/>
                            <BitmapImage x:Key="bg12" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_12.png"/>
                            <BitmapImage x:Key="bg13" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_13.png"/>
                            <BitmapImage x:Key="bg14" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_14.png"/>
                            <BitmapImage x:Key="bg15" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_15.png"/>
                            <BitmapImage x:Key="bg16" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_16.png"/>
                            <BitmapImage x:Key="bg17" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_17.png"/>
                            <BitmapImage x:Key="bg18" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_18.png"/>
                            <BitmapImage x:Key="bg19" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_19.png"/>
                            <BitmapImage x:Key="bg20" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_20.png"/>
                            <BitmapImage x:Key="bg21" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_21.png"/>
                            <BitmapImage x:Key="bg22" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_22.png"/>
                            <BitmapImage x:Key="bg23" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_1_23.png"/>
                        </ls:LSImageSequence.Resources>
                    </ls:LSImageSequence>
                </ControlTemplate>

                <ControlTemplate x:Key="LoadingImagesAct2">
                    <ls:LSImageSequence Style="{StaticResource SequenceStyle}">
                        <ls:LSImageSequence.Resources>
                            <BitmapImage x:Key="bg24"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_01.png"/>
                            <BitmapImage x:Key="bg25"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_02.png"/>
                            <BitmapImage x:Key="bg26"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_03.png"/>
                            <BitmapImage x:Key="bg27"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_04.png"/>
                            <BitmapImage x:Key="bg28"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_05.png"/>
                            <BitmapImage x:Key="bg29"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_06.png"/>
                            <BitmapImage x:Key="bg30"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_07.png"/>
                            <BitmapImage x:Key="bg31"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_08.png"/>
                            <BitmapImage x:Key="bg32"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_09.png"/>
                            <BitmapImage x:Key="bg33"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_10.png"/>
                            <BitmapImage x:Key="bg34"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_11.png"/>
                            <BitmapImage x:Key="bg35"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_12.png"/>
                            <BitmapImage x:Key="bg36"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_13.png"/>
                            <BitmapImage x:Key="bg37"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_14.png"/>
                            <BitmapImage x:Key="bg38"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_15.png"/>
                            <BitmapImage x:Key="bg39"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_16.png"/>
                            <BitmapImage x:Key="bg40"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_17.png"/>
                            <BitmapImage x:Key="bg41"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_18.png"/>
                            <BitmapImage x:Key="bg42"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_19.png"/>
                            <BitmapImage x:Key="bg43"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_20.png"/>	
                            <BitmapImage x:Key="bg44"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_21.png"/>
	                        <BitmapImage x:Key="bg45"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_2_22.png"/>
                        </ls:LSImageSequence.Resources>
                    </ls:LSImageSequence>
                </ControlTemplate>

                <ControlTemplate x:Key="LoadingImagesAct3">
                    <ls:LSImageSequence Style="{StaticResource SequenceStyle}">
                        <ls:LSImageSequence.Resources>
                            <!-- The images to randomly cycle through during loading -->
                            <BitmapImage x:Key="bg46"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_01.png"/>
                            <BitmapImage x:Key="bg47"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_02.png"/>
                            <BitmapImage x:Key="bg48"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_03.png"/>
                            <BitmapImage x:Key="bg49"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_04.png"/>
                            <BitmapImage x:Key="bg50"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_05.png"/>
                            <BitmapImage x:Key="bg51"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_06.png"/>
                            <BitmapImage x:Key="bg52"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_07.png"/>
                            <BitmapImage x:Key="bg53"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_08.png"/>
                            <BitmapImage x:Key="bg54"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_09.png"/>
                            <BitmapImage x:Key="bg55"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_10.png"/>
                            <BitmapImage x:Key="bg56"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_11.png"/>
                            <BitmapImage x:Key="bg57"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_12.png"/>
                            <BitmapImage x:Key="bg58"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_13.png"/>
                            <BitmapImage x:Key="bg59"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_14.png"/>
                            <BitmapImage x:Key="bg60"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_15.png"/>
                            <BitmapImage x:Key="bg61"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_16.png"/>
                            <BitmapImage x:Key="bg62"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_17.png"/>
                            <BitmapImage x:Key="bg63"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_18.png"/>
                            <BitmapImage x:Key="bg64"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_19.png"/>
                            <BitmapImage x:Key="bg65"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_20.png"/>
                            <BitmapImage x:Key="bg66"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_21.png"/>
                            <BitmapImage x:Key="bg67"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_22.png"/>
                            <BitmapImage x:Key="bg68"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_23.png"/>
                            <BitmapImage x:Key="bg69"  UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/LoadingScreen/loadScreen_BGartwork_3_24.png"/>
                        </ls:LSImageSequence.Resources>
                    </ls:LSImageSequence>
                </ControlTemplate>

                <ControlTemplate x:Key="LoadingSingleImage">
                    <!-- CHANGED: fill screen on ultrawide; crop vertically if needed -->
                    <Image x:Name="SingleImageSource"
                           Source="{StaticResource KeyArtScreen}"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Stretch"
                           Stretch="UniformToFill"
                           Opacity="0"/>

                    <ControlTemplate.Triggers>
                        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                            <BeginStoryboard Name="ImageFadeIn" Storyboard="{StaticResource LoadingScreen.ScreenFadeIn}"/>
                        </EventTrigger>
                        <EventTrigger RoutedEvent="FrameworkElement.Unloaded">
                            <StopStoryboard BeginStoryboardName="ImageFadeIn"/>
                        </EventTrigger>

                        <DataTrigger Binding="{Binding LevelName}" Value="CRE_Main_A">
                            <Setter TargetName="SingleImageSource" Property="Source" Value="{StaticResource CrecheScreen}"/>
                            <DataTrigger.EnterActions>
                                <BeginStoryboard x:Name="CrecheFadeIn" Storyboard="{StaticResource LoadingScreen.ScreenFadeIn}"/>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <StopStoryboard BeginStoryboardName="CrecheFadeIn"/>
                            </DataTrigger.ExitActions>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding LoadingState}" Value="Tutorial">
                            <Setter TargetName="SingleImageSource" Property="Source" Value="{StaticResource TutorialScreen}"/>
                            <DataTrigger.EnterActions>
                                <BeginStoryboard x:Name="TutorialFadeIn" Storyboard="{StaticResource LoadingScreen.ScreenFadeIn}"/>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <StopStoryboard BeginStoryboardName="TutorialFadeIn"/>
                            </DataTrigger.ExitActions>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding LoadingState}" Value="Initial">
                            <Setter TargetName="SingleImageSource" Property="Source" Value="{StaticResource InitialScreen}"/>
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </ControlTemplate.Resources>

            <Grid Background="Black" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition x:Name="BottomHeight" Height="0"/>
                </Grid.RowDefinitions>

                <!-- CHANGED: Viewbox fills and crops to screen aspect -->
                <Viewbox Grid.Row="0" Grid.ColumnSpan="2" Stretch="UniformToFill">
                    <Grid>
                        <Control x:Name="LoadingImages" Template="{StaticResource LoadingImagesAct3}"/>
                        <!-- CHANGED: overlay fills and crops -->
    <!-- Side-gradient background removed -->
</Grid>
                </Viewbox>

                <StackPanel Grid.Row="0" HorizontalAlignment="Right" Margin="50" Visibility="{Binding Data.IsGold, Converter={StaticResource BoolToCollapsedConverter}}">
                    <TextBlock x:Name="LoadingState" Text="State" HorizontalAlignment="Right"/>
                    <TextBlock Text="{Binding LevelName}" HorizontalAlignment="Right"/>
                </StackPanel>

                <!-- Hints -->
                <ItemsControl Grid.Row="0"  x:Name="LoadingHints" ItemsSource="{Binding LoadingHints}" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Margin="520,2000"  AlternationCount="{Binding LoadingHints.Count}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Grid HorizontalAlignment="Stretch"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate DataType="{x:Type ls:LoadingHint}">
                            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Opacity="0"
                               Style="{StaticResource Loading.HintText}"
                               Tag="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(ItemsControl.AlternationIndex), Mode=OneWay}" >
                                <b:Interaction.Behaviors>
                                    <ls:CtxTransStringRunGeneratorBehavior Source="{Binding CtxTransText}"
                                                                           NamedParamContentStyle="{StaticResource Loading.Hint.NamedParams}"
                                                                           NamedParamInputEvents="{Binding Path=DataContext.CurrentPlayer.UIData.InputEvents, ElementName='root'}"
                                                                           InlineUIContainerStyle="{StaticResource Loading.Hint.InlineUIContainerStyle}"/>
                                </b:Interaction.Behaviors>
                                <b:Interaction.Triggers>
                                    <!-- Fade-in -->
                                    <b:PropertyChangedTrigger Binding="{Binding Path=DataContext.VisibileHintIndex, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ls:UIWidget}}}">
                                        <b:Interaction.Behaviors>
                                            <b:ConditionBehavior>
                                                <b:ConditionalExpression>
                                                    <b:ComparisonCondition LeftOperand="{Binding Mode=OneWay, Path=Tag, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBlock}}}"
                                                                            Operator="Equal"
                                                                            RightOperand="{Binding Path=DataContext.VisibileHintIndex, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ls:UIWidget}}}" />
                                                </b:ConditionalExpression>
                                            </b:ConditionBehavior>
                                        </b:Interaction.Behaviors>
                                        <ls:LSControlStoryboard ControlStoryboardOption="Stop" Storyboard="{StaticResource LoadingScreen.HintFadeOut}" Target="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBlock}}}" />
                                        <ls:LSControlStoryboard ControlStoryboardOption="Play" Storyboard="{StaticResource LoadingScreen.HintFadeIn}" Target="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBlock}}}" />
                                    </b:PropertyChangedTrigger>
                                    <!-- Fade-out -->
                                    <b:PropertyChangedTrigger Binding="{Binding Path=DataContext.VisibileHintIndex, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ls:UIWidget}}}">
                                        <b:Interaction.Behaviors>
                                            <b:ConditionBehavior>
                                                <b:ConditionalExpression>
                                                    <b:ComparisonCondition LeftOperand="{Binding Mode=OneWay, Path=Tag, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBlock}}}"
                                                                            Operator="NotEqual"
                                                                            RightOperand="{Binding Path=DataContext.VisibileHintIndex, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ls:UIWidget}}}" />
                                                    <b:ComparisonCondition LeftOperand="{Binding Mode=OneWay, Path=Opacity, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBlock}}}"
                                                                            Operator="GreaterThan"
                                                                            RightOperand="0" />
                                                </b:ConditionalExpression>
                                            </b:ConditionBehavior>
                                        </b:Interaction.Behaviors>
                                        <ls:LSControlStoryboard ControlStoryboardOption="Stop" Storyboard="{StaticResource LoadingScreen.HintFadeIn}" Target="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBlock}}}" />
                                        <ls:LSControlStoryboard ControlStoryboardOption="Play" Storyboard="{StaticResource LoadingScreen.HintFadeOut}" Target="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBlock}}}" />
                                    </b:PropertyChangedTrigger>
                                </b:Interaction.Triggers>
                            </TextBlock>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <TextBlock Grid.Row="0" x:Name="LongTimeCodeSyncMessage" Text="{Binding LoadingStateInfo}" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,180,16"/>

                <StackPanel Grid.Row="0" x:Name="LoadingProgress" Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="160,160,60,80">
                    <TextBlock VerticalAlignment="Center" Text="{Binding Progress,Converter={StaticResource FloatToPercentStringConverter}, StringFormat={}{0}%}" FontSize="{StaticResource BigFontSize}" FontWeight="ExtraBold" Foreground="{StaticResource LS_baseTxtColor}">
                        <TextBlock.Effect>
                            <DropShadowEffect BlurRadius="25" ShadowDepth="1" Opacity="1" Color="{StaticResource tint00}"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    <Control Template="{StaticResource BusyElement}" Margin="0,-64" VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>

            <ControlTemplate.Triggers>
                <DataTrigger Binding="{Binding Data.UIInputMethod}" Value="Controller">
                    <Setter TargetName="BottomHeight" Property="Height" Value="0"/>
                    <Setter TargetName="LoadingProgress" Property="Margin" Value="160,160,200,160"/>
                </DataTrigger>

                <!-- Unique Loading Images -->

                <DataTrigger Binding="{Binding LevelName}" Value="WLD_Main_A">
                    <Setter TargetName="LoadingImages" Property="Template" Value="{StaticResource LoadingImagesAct1}"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LevelName}" Value="CRE_Main_A">
                    <Setter TargetName="LoadingImages" Property="Template" Value="{StaticResource LoadingSingleImage}"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LevelName}" Value="SCL_Main_A">
                    <Setter TargetName="LoadingImages" Property="Template" Value="{StaticResource LoadingImagesAct2}"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LevelName}" Value="BGO_Main_A">
                    <Setter TargetName="LoadingImages" Property="Template" Value="{StaticResource LoadingImagesAct3}"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LevelName}" Value="CTY_Main_A">
                    <Setter TargetName="LoadingImages" Property="Template" Value="{StaticResource LoadingImagesAct3}"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LoadingState}" Value="Initial">
                    <Setter TargetName="LoadingState" Property="Text" Value="Initial"/>
                    <Setter TargetName="LoadingImages" Property="Template" Value="{StaticResource LoadingSingleImage}"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LoadingState}" Value="CharacterCreation">
                    <Setter TargetName="LoadingState" Property="Text" Value="CharacterCreation"/>
                    <Setter TargetName="LoadingImages" Property="Template" Value="{StaticResource LoadingSingleImage}"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LoadingState}" Value="MultiplayerLobby">
                    <Setter TargetName="LoadingState" Property="Text" Value="MultiplayerLobby"/>
                    <Setter TargetName="LoadingImages" Property="Template" Value="{StaticResource LoadingSingleImage}"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LoadingState}" Value="Tutorial">
                    <Setter TargetName="LoadingState" Property="Text" Value="Tutorial"/>
                    <Setter TargetName="LoadingImages" Property="Template" Value="{StaticResource LoadingSingleImage}"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LoadingState}" Value="Level">
                    <Setter TargetName="LoadingState" Property="Text" Value="Level"/>
                </DataTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

    </ls:UIWidget.Template>

    <b:Interaction.Triggers>
        <b:TimerTrigger EventName="Loaded" MillisecondsPerTick="100" TotalTicks="1">
            <b:InvokeCommandAction Command="{Binding AdvanceHintCommand}" />
        </b:TimerTrigger>
        <b:TimerTrigger EventName="Loaded" MillisecondsPerTick="10000" TotalTicks="-1">
            <b:InvokeCommandAction Command="{Binding AdvanceHintCommand}" />
        </b:TimerTrigger>
    </b:Interaction.Triggers>

    
</ls:UIWidget>
